<!DOCTYPE html>
<html>
<head>
    <title>NAO CONTROL</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <script type = "text/javascript" src = "https://169.254.6.238/libs/qimessaging/1.0/qimessaging.js"></script>
</head>

<h1>NAO CONTROL</h1>

<body onload = "connect()">

<input type="button" onclick= "answer1()" value = "answer1"></button>

<input type="button" onclick= "answer2()" value = "answer2"></button>

<input type="button" onclick= "answer3()" value = "answer3"></button>

<input type="button" onclick= "stop()" value = "stop"></button>


<script>
var textToSpeech;
var session;

function connect()
{
  session = new QiSession('169.254.6.238');
  session.socket().on('connect', function()
  {
    console.log("QiSession connected!");
  }).on('disconnect', function(){
    console.log("QiSession disconnect");
  });
}

function speak()
{
  session.service("ALTextToSpeech").done(function(tts)
  {
    tts.say("You just touched my head!");
  });
}
function speak2(){
  session.service("ALTextToSpeech").done(function(tts)
  {
    tts.say("bye bye!");
  });
}

function touchHead() {
  session.service("ALMemory").done(function (ALMemory) {
    ALMemory.subscriber("FrontTactilTouched").done(function (subscriber) {
      // subscriber.signal is a signal associated to "FrontTactilTouched"
      subscriber.signal.connect(function (state) {
        state == 1 ? speak() : speak2();
      });
    });
  });
}

function answer1() {
  session.service("ALBehaviorManager").done(function(tts)
  {
    tts.runBehavior("answer3");
  });
}

function answer3() {
  session.service("ALBehaviorManager").done(function(tts)
  {
    tts.runBehavior("answer1");
  });
}

function answer2() {
  session.service("ALBehaviorManager").done(function(tts)
  {
    tts.runBehavior("answer2");
  });
}

function stop() {
  session.service("ALBehaviorManager").done(function(tts)
  {
    tts.stopAllBehaviors();
  });
}

</script>
</body>
</html>
