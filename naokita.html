<!DOCTYPE html>
<html>
<head>
    <title>NAO CONTROL</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.98.0/css/materialize.min.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <script type = "text/javascript" src = "http://nao:nao@169.254.6.238/libs/qimessaging/1.0/qimessaging.js"></script>
    <style>
    .btn-large {margin: 15px;}
    .center {text-align: center;}
    </style>
</head>

<body>
    <nav class="purple darken-3">
      <div class="nav-wrapper">
        <a href="naokita.html" class="brand-logo center">NAOKITA Control</a>
        <a href="#" data-activates="mobile-demo" class="button-collapse">
          <i class="material-icons">menu</i>
        </a>
        <ul class="right hide-on-med-and-down">
          <li><a href="#">Access Camera</a></li>
          <li><a href="#">Manual Control</a></li>
          <li><a href="#">Text to speech</a></li>
        </ul>
        <ul class="side-nav" id="mobile-demo">
          <li><a href="#">Access Camera</a></li>
          <li><a href="#">Manual Control</a></li>
          <li><a href="#">Text to speech</a></li>
        </ul>
      </div>
    </nav>
  <div class="container">
    <div>
      <div id="succesfullConnect">
      </div>
    </div>
    <div class="section">
      <h4 class="purple-text text-darken-3 header center-align">Connection</h4>
      <div class="row">
        <div class="col s12 center">
          <a id="connect" class="waves-effect waves-light btn-large  orange lighten-1" onclick= "connect()"><i class="material-icons left">settings_input_antenna</i>Connect to NAO</a>
          <a id="disconnect" class="waves-effect waves-light btn-large red" onclick= "disconnect()"><i class="material-icons left">stop</i>Disconnect from NAO</a>
        </div>
      </div>
    </div>
    <div class="divider"></div>
    <div class="section">
      <h4 class="purple-text text-darken-3 center-align">Answers</h4>
      <div class="row">
        <div class="col s12 center">
          <a class="waves-effect waves-purple btn-large  orange lighten-1" onclick= "answer1()"><i class="material-icons left">play_arrow</i>Answer 1</a>
          <a class="waves-effect waves-purple btn-large  orange lighten-1" onclick= "answer2()"><i class="material-icons left">play_arrow</i>Answer 2</a>
          <a class="waves-effect waves-purple btn-large  orange lighten-1" onclick= "answer3()"><i class="material-icons left">play_arrow</i>Answer 3</a>
        </div>
      </div>
    </div>
    <div class="divider"></div>
    <div class="row">
      <div class="col s12 center">
        <a id="stopAll" class="waves-effect waves-light btn-large disabled red" onclick= "stop()"><i class="material-icons left">stop</i>Stop Answer</a>
      </div>
    </div>
    <div class="divider"></div>
    <div class="section">
      <h4 class="purple-text text-darken-3 center-align"> Manual Control</h4>
      <div class="row">
        <div class="col s12 center">
          <a class="waves-effect waves-purple btn-large  orange lighten-1" onclick= "sleep()"><i class="material-icons left">play_arrow</i>Sleep</a>
          <a class="waves-effect waves-purple btn-large  orange lighten-1" onclick= "wakeUp()"><i class="material-icons left">play_arrow</i>Wake Up</a>
        </div>
      </div>
    </div>

  </div>


<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.98.0/js/materialize.min.js"></script>
<script>
$(".button-collapse").sideNav();
var textToSpeech;
var session;

function connect()
{
  session = new QiSession('169.254.6.238');
  session.socket().on('connect', function()
  {
    console.log("QiSession connected!");
    $("#connect").fadeOut('slow');
  }).on('disconnect', function(){
    console.log("QiSession disconnect");
  });
}

function stop() {
  session.service("ALBehaviorManager").done(function(tts)
  {
    tts.stopAllBehaviors();
    $('#stopAll').addClass("disabled");
  });
}

function speak()
{
  session.service("ALTextToSpeech").done(function(tts)
  {
    tts.say("You just touched my head!");
  });
}
function speak2(){
  session.service("ALTextToSpeech").done(function(tts)
  {
    tts.say("bye bye!");
  });
}

function touchHead() {
  session.service("ALMemory").done(function (ALMemory) {
    ALMemory.subscriber("FrontTactilTouched").done(function (subscriber) {
      // subscriber.signal is a signal associated to "FrontTactilTouched"
      subscriber.signal.connect(function (state) {
        state == 1 ? speak() : speak2();
      });
    });
  });
}

function answer1() {
  session.service("ALBehaviorManager").done(function(tts)
  {
    tts.runBehavior("answer3");
  });
  $('#stopAll').removeClass("disabled");
}

function answer3() {
  session.service("ALBehaviorManager").done(function(tts)
  {
    tts.runBehavior("answer1");
  });
}

function answer2() {
  session.service("ALBehaviorManager").done(function(tts)
  {
    tts.runBehavior("answer2");
  });
}

function sleep() {
  session.service("ALMotion").done(function(tts)
  {
    tts.rest();
  });
}

function wakeUp() {
  session.service("ALMotion").done(function(tts)
  {
    tts.wakeUp();
  });
}

</script>
</body>
</html>
